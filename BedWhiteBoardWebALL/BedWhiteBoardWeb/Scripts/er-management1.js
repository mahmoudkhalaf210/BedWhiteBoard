var jsonRoomsAndBeds,openedNS,vm,triageLevelsCount,triageLevels,triageSheetKey,ERstartTime,ERavgTime,ERmaxTime,intTRGstartTime,intTRGavgTime,intTRGmaxTime,intWAstartTime,intWAavgTime,intWAmaxTime,jsonErDoctors,emptyBeds,dischareStatus,diagDoctors,diagStatus,selectedWP,selectedBed,selectedNotOnBed,clickedWP,clickedBed,clickedNotOnBed,dxMnuWPToTriage,dxMnuTrtOnBed,dxMnuTrtNotOnBed,moveInfo,jsonWPs,chartWPSource,timer,childwindow,timerAdmission,childwindowAdmission,timerEMR,childwindowEMR,serverTimeProcessed,newborn,infant,child,adult,ip,chat,DuplexIP="",currDate=new Date,TRGstartTime=new Array,TRGavgTime=new Array,TRGmaxTime=new Array,WAstartTime=new Array,WAavgTime=new Array,WAmaxTime=new Array,isInitialReceivCalled=!1,lastBedClick="",subMnuNSs=[],MnuesAttached=[],ER_EnableFastTriage=0,ER_EnableBilling=0,Enable_Alphanumric_PID=0;function IsNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}$.t({async:!0}),$.extend($.o["i"],{s:function(e,t,n,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf((n[3]||"").toLowerCase())>=0}}),$.l("BedManagementApiActions/Nursestations/GetServerTime",function(e){var t=new XDate(e)-+new XDate;setInterval(function(){serverTimeProcessed=+new XDate+t},1e3)}),$.l("BedManagementApiActions/Nursestations/GetIP",function(e){ip=e});var mnuWPsToTriaged,mnuWPs=[{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"},{id:"0",text:"Move to Holding bay",m:"images/moveto.png"}];mnuWPsToTriaged=1!=ER_EnableFastTriage?[{id:"0",text:"Triage Patient Assessment",m:"images/list_accept.png"},{id:"0",text:"Cancel Registration",m:"images/Discharge-Order.png"}]:[{id:"0",text:"Triage Patient Assessment",m:"images/list_accept.png"},{id:"0",text:"Cancel Registration",m:"images/Discharge-Order.png"},{id:"0",text:"         ___________________________"},{id:"0",text:"Fast Triage & Move to Holding bay",m:"images/moveto.png"}];var mnuTrtmsOnBed=[{id:"0",text:"Patient Medical Record",m:"images/Patient-Medical-Record.png"},{id:"0",text:"Request for Admission",m:"images/Request-for-Admission.png",visible:!0},{id:"0",text:"Cancel admission request",m:"images/Request-for-Admission.png",visible:!1},{id:"0",text:"Discharge Order",m:"images/Discharge-Order.png"},{id:"0",text:"Reassign Doctor",m:"images/reassign.png"},{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"},{id:"0",text:"Move to Holding bay",m:"images/moveto.png"}],mnuTrtmsNotOnBed=[{id:"0",text:"Patient Medical Record",m:"images/Patient-Medical-Record.png"},{id:"0",text:"Request for Admission",m:"images/Request-for-Admission.png",visible:!0},{id:"0",text:"Cancel admission request",m:"images/Request-for-Admission.png",visible:!1},{id:"0",text:"Discharge Order",m:"images/Discharge-Order.png"},{id:"0",text:"Reassign Doctor",m:"images/reassign.png"},{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"}],mnuWPsItemClicked=function(e){var t,n=selectedWP.p(),i=selectedWP.g(),o=selectedWP.k();"0"==e.h.id?(ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.B(),function(e){return ko.$.T(e.I(),function(e){if(void 0!=e)return t=e.v(),!1}),!1}),!1}),moveInfo="WPtoHP",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(e,s){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='"+t+"' sKey='"+o+"' patientId='"+n+"' episodeKey='"+i+"' onclick='selectDoctor(this,\""+jsonErDoctors[e].S+","+jsonErDoctors[e].P+"\");'><td>"+jsonErDoctors[e].P+"</td></tr>")})):e.h.text.startsWith("Move")?(moveInfo="WPtoBed",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(t,s){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='"+e.h.id+"' sKey='"+o+"' patientId='"+n+"' episodeKey='"+i+"' onclick='selectDoctor(this,\""+jsonErDoctors[t].S+","+jsonErDoctors[t].P+"\");'><td>"+jsonErDoctors[t].P+"</td></tr>")})):$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/TransferWPtoWP?NS_id="+e.h.id+"&pId="+n+"&sKey="+o+"&ek="+i+"&hospId="+hospitalid,W:function(t){var i=t;DevExpress.C.R("Patient transfered successfully.","success",1500),ko.$.T(vm._(),function(t){if(t.v()==openedNS)ko.$.T(t.O(),function(e){if(void 0!=e&&e.p()==n)return t.O.remove(e),!1});else if(t.v()==e.h.id){var o=new WaitingPatient(i);t.O.push(o),$("#try_exta"+t.v()+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+t.v()+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})})}})},error:function(e){console.log(e.responseText)}})},mnuWPsToTriageItemClicked=function(e){var t=selectedWP.p(),n=selectedWP.g(),i=selectedWP.k();if("0"==e.h.id){if("0"==selectedWP.F()||"10"==selectedWP.F()||null==selectedWP.F())if(e.h.text.startsWith("Triage")){var o=ko.toJSON(selectedWP);1!=fromWindows?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/PatientDblClick?uId="+uId+"&hospId="+hospitalid,data:JSON.stringify(o),W:function(e){url=e,$("#framTriageSheet").L("src",""),$("#framTriageSheet").L("src",url),$("#diagTriageSheet").K("show")},error:function(e){console.log(e),console.log("An error has occurred while processing rule: "+e.responseText)}}):$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/PatientDblClickWindows?uId="+uId+"&hospId="+hospitalid,data:JSON.stringify(o),W:function(e){var t=e.split(","),n=t[2];t[2].indexOf(/\\\\/g)>-1&&(n=t[2].replace(/\\\\/g,"\\")),t[2].indexOf("\\\\")>-1&&(n=t[2].replace(/\\\\\\/,"\\")),t[2].indexOf("////")>-1&&(n=t[2].replace(/\/\//g,"/")),url=ip+"site-medicaweb/sheet.aspx|SheetLoader.exe|SheetKey~"+t[0]+"|ReadOnly~0|AllowDefinition~0|OrderKey~"+t[1]+"|PatientID~"+selectedWP.p()+"|EpisodeKey~-1|NetPath~"+n+"|UserKey~"+uId+"|PatName~"+selectedWP.j(),window.location.href=url},error:function(e){console.log(e),console.log("An error has occurred while processing rule: "+e.responseText)}})}else if(e.h.text.startsWith("Cancel"))$("#framCancelReg").L("src","../EmergencyWEB/CancelBokingWB.html?userkey="+uId+"&hospitalid="+hospitalid+"&lang=0&pid="+t+"&pname="+selectedWP.j()+"&skey="+i),$("#diagCancelReg").K("show");else if(e.h.text.startsWith("Fast")){var s;ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.B(),function(e){return ko.$.T(e.I(),function(e){if(void 0!=e)return s=e.v(),!1}),!1}),!1}),$("#diagTriagePriority tbody").empty(),$.N(triageLevels,function(e,o){$("#triagePriorityList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='wa"+s+"' sKey='"+i+"' patientId='"+t+"' episodeKey='"+n+"' onclick='selectTriagePriority(this,\""+triageLevels[e].q+","+triageLevels[e].U+"\");'><td data-toggle='modal' data-target='#diagDoctors' >   <div style='float: left;'>"+triageLevels[e].U+"</div><div class='triage1' style='float: right; background-color:"+GetColorByStatus(triageLevels[e].q)+";' >"+triageLevels[e].q+"</div></td></tr>")})}}else e.h.text.startsWith("Fast")&&($("#diagTriagePriority tbody").empty(),$.N(triageLevels,function(o,s){$("#triagePriorityList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='"+e.h.id+"' sKey='"+i+"' patientId='"+t+"' episodeKey='"+n+"' onclick='selectTriagePriority(this,\""+triageLevels[o].q+","+triageLevels[o].U+"\");'><td data-toggle='modal' data-target='#diagDoctors' >   <div style='float: left;'>"+triageLevels[o].U+"</div><div class='triage1' style='float: right; background-color:"+GetColorByStatus(triageLevels[o].q)+";' >"+triageLevels[o].q+"</div></td></tr>")}))},mnuTrtmsOnBedItemClicked=function(e){var t=selectedBed.v(),n=selectedBed.p(),i=selectedBed.H(),o=selectedBed.X(),s=selectedBed.j(),a=selectedBed.V(),r=selectedBed.J(),d=e.h.id;if("0"!=e.h.id)e.h.text.startsWith("Move")?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/MoveBedtoBed?pId="+n+"&ek="+i+"&bk="+d,W:function(e){url=e,DevExpress.C.R("Patient moved successfully.","success",1500),ko.$.T(vm._(),function(e){if(e.v()==openedNS){var i=null;ko.$.T(e.B(),function(e){ko.$.T(e.I(),function(e){if(e.v()==t&&e.p()==n)return i=ko.toJSON(e),e.sex("free"),e.Z(""),e.p(null),e.Y(""),e.j(""),e.ee(""),e.status(""),e.te(""),e.ne(""),e.ie(""),e.oe(""),e.se(""),e.F("0"),e.ae("lightgray"),e.H(""),e.re(""),e.V(""),e.de(""),e.ce(""),e.X(""),e.le(""),e.me(""),e.icon(""),e.color(""),e.location(""),e.ue(""),e.pe(""),e.ge(""),e.fe(""),e.ke(""),e.he(""),e.Te(""),e.$e([]),!1})}),ko.$.T(e.B(),function(e){ko.$.T(e.I(),function(e){if(e.v()==d){var t=null;return console.log(i),null!=(t="object"!=typeof i?JSON.parse(i):i)&&(e.sex(t.sex),e.Z(t.Z),e.p(t.p),e.Y(t.Y),e.j(t.j),e.ee(t.ee),e.status(t.status),e.te(t.te),e.ne(t.ne),e.ie(t.ie),e.oe(t.oe),e.se(t.se),e.F(t.F),e.ae(t.ae),e._e(t._e),e.H(t.H),e.re(t.re),e.V(t.V),e.de(t.de),e.ce(t.ce),e.X(t.X),e.le(t.le),e.me(t.me),e.icon(t.icon),e.color(t.color),e.location(t.location),e.ue(t.ue),e.pe(t.pe),e.ge(t.ge),e.fe(t.fe),e.ke(t.ke),e.he(t.he),e.Te(t.Te),e.$e(t.$e)),!1}})}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})})}})},error:function(e){console.log(e.responseText)}}):$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/TransferTrttoHP?NS_id="+e.h.id+"&pId="+n+"&ek="+i+"&sKey="+o+"&uId="+uId,W:function(t){var i=t;DevExpress.C.R("Patient transfered successfully.","success",1500),ko.$.T(vm._(),function(t){t.v()==openedNS?ko.$.T(t.B(),function(e){ko.$.T(e.I(),function(e){if(e.p()==n)return e.sex("free"),e.Z(""),e.p(null),e.Y(""),e.j(""),e.ee(""),e.status(""),e.te(""),e.ne(""),e.ie(""),e.oe(""),e.se(""),e.F("0"),e.ae("lightgray"),e.H(""),e.re(""),e.V(""),e.de(""),e.ce(""),e.X(""),e.le(""),e.me(""),e.icon(""),e.color(""),e.location(""),e.ue(""),e.pe(""),e.ge(""),e.fe(""),e.ke(""),e.he(""),e.Te(""),e.$e([]),!1}),UpdateMnuWps(t),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})})}):t.v()==e.h.id&&(ko.$.T(t.B(),function(e){if(i.ve==e.ye()){var t=new RoomBeds(i);return e.Be.push(t),!1}}),UpdateMnuWps(t),$("#try_extb"+t.v()+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}))})},error:function(e){console.log(e.responseText)}});else if(e.h.text.startsWith("Move"))$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/MoveBedtoHP?pId="+n+"&ek="+i,W:function(e){url=e,DevExpress.C.R("Patient moved successfully.","success",1500),ko.$.T(vm._(),function(e){e.v()==openedNS&&ko.$.T(e.B(),function(t){ko.$.T(t.I(),function(t){if(t.p()==n)return $("#bedId"+t.v()+" .triage").text("0").Ie("background-color","lightgray"),t._e("1"),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),!1})})})},error:function(e){console.log(e.responseText)}});else if(e.h.text.startsWith("Discharge"))$.l("BedManagementApiActions/WaitingPatients/GetDischareStatus",function(e){dischareStatus=e,$("#statusList tbody").empty(),$.N(dischareStatus,function(e,t){$("#statusList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' episodeKey='"+i+"' sKey='"+o+"' pId='"+n+"' onclick='selectStatus(this,\""+dischareStatus[e].xe+","+dischareStatus[e].Ne+"\");'><td>"+dischareStatus[e].Ne+"</td></tr>")})});else if(e.h.text.startsWith("Request"))1==fromWindows?(url=ip+"site-medicaweb/AdmissionRequest.aspx|AdmissionRequest.exe|"+uKey+",0,0,IsEr~1|PatientID~"+n+"|BookingNum~"+o+"|DocID~"+a,window.location.href=url):(url="../AdmissionRequestUI/AdmissionRequest.html?lang="+lang+"&hospitalid="+hospitalid+"&userkey="+uId+"&bookingkey="+o+"&iser=1&docid="+a+"&patientid="+n+"&isedit=0&regsnumber=0",$("#framRequestAdmission").L("src",""),$("#framRequestAdmission").L("src",url),$("#diagRequestAdmission").K("show"));else if(e.h.text.startsWith("Cancel"))$.l("BedManagementApiActions/Nursestations/CancelAdmissionRequest?bookingKey="+o,function(t){1==t&&(DevExpress.C.R("Admission request canceled.","success",1500),e.be.ue(0))});else if(e.h.text.startsWith("Patient Medical")){if(1==fromWindows)url=ip+"site-medicaweb/emr.aspx|FreeEMRCaller.exe|"+n+","+i+","+uId+",0,0,0",window.location.href=url;else try{url="/NewPatientRecord/PatientMedicalRecord.html?PatId="+n+"&EpsKey="+i+"&UserID="+uId,childwindowEMR=window.parent.Se(n,n+" "+s,i,0,100,"E"),setTimeout(function(){$(e.Pe).parent().hide()},2e3)}catch(e){}$.l("BedManagementApiActions/WaitingPatients/OpenEMR?pId="+n+"&ek="+i+"&uId="+uId+"&seen="+(""==r||void 0==r?0:1),function(e){}),selectedBed.J(new Date)}else e.h.text.startsWith("Reassign")&&(moveInfo="ReassignDoctor",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(e,t){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='0' sKey='"+o+"' patientId='"+n+"' episodeKey='"+i+"' onclick='selectDoctor(this,\""+jsonErDoctors[e].S+","+jsonErDoctors[e].P+"\");'><td>"+jsonErDoctors[e].P+"</td></tr>")}))};function checkChildAdmission(){childwindowAdmission.closed&&(clearInterval(timerAdmission),AfterAdmissionClose())}function AfterAdmissionClose(){var e;console.log("AfterAdmissionClose"),null==selectedBed?e=selectedNotOnBed.p():null!=selectedNotOnBed&&(e=selectedBed.p()),ko.$.T(vm._(),function(t){t.v()==openedNS&&ko.$.T(t.B(),function(t){ko.$.T(t.Be(),function(t){if(t.p()==e)return $.l("BedManagementApiActions/Beds/GetERSingleBed?pId="+e+"&uId="+uId,function(e){var n=e;t.ue(n.ue),t.ke(n.ke)}),!1})})})}function checkChildEMR(){childwindowEMR.closed&&clearInterval(timerEMR)}var mnuTrtmsNotOnBedItemClicked=function(e){var t=selectedNotOnBed.p(),n=selectedNotOnBed.H(),i=selectedNotOnBed.X(),o=selectedNotOnBed.j(),s=selectedNotOnBed.V(),a=selectedNotOnBed.J();if("0"!=e.h.id)e.h.text.startsWith("Move")?(moveInfo="HPtoBed",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(o,s){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='"+e.h.id+"' sKey='"+i+"' patientId='"+t+"' episodeKey='"+n+"' onclick='selectDoctor(this,\""+jsonErDoctors[o].S+","+jsonErDoctors[o].P+"\");'><td>"+jsonErDoctors[o].P+"</td></tr>")})):$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/TransferTrttoHP?NS_id="+e.h.id+"&pId="+t+"&ek="+n+"&sKey="+i+"&uId="+uId,W:function(n){var i=n;DevExpress.C.R("Patient transfered successfully.","success",1500),ko.$.T(vm._(),function(n){n.v()==openedNS?ko.$.T(n.B(),function(e){ko.$.T(e.Ae(),function(n){if(n.p()==t)return e.Be.remove(n),!1}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})})}):n.v()==e.h.id&&(ko.$.T(n.B(),function(e){if(i.ve==e.ye()){var t=new RoomBeds(i);return e.Be.push(t),!1}}),UpdateMnuWps(n),$("#try_extb"+n.v()+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}))})},error:function(e){console.log(e.responseText)}});else if(e.h.text.startsWith("Discharge"))$.l("BedManagementApiActions/WaitingPatients/GetDischareStatus",function(e){dischareStatus=e,$("#statusList tbody").empty(),$.N(dischareStatus,function(e,o){$("#statusList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' episodeKey='"+n+"' sKey='"+i+"' pId='"+t+"' onclick='selectStatus(this,\""+dischareStatus[e].xe+","+dischareStatus[e].Ne+"\");'><td>"+dischareStatus[e].Ne+"</td></tr>")})});else if(e.h.text.startsWith("Request"))1==fromWindows?(url=ip+"site-medicaweb/AdmissionRequest.aspx|AdmissionRequest.exe|"+uKey+",0,0,IsEr~1|PatientID~"+t+"|BookingNum~"+i+"|DocID~"+s,window.location.href=url):(url="../AdmissionRequestUI/AdmissionRequest.html?lang="+lang+"&hospitalid="+hospitalid+"&userkey="+uId+"&bookingkey="+i+"&iser=1&docid="+s+"&patientid="+t+"&isedit=0&regsnumber=0",$("#framRequestAdmission").L("src",""),$("#framRequestAdmission").L("src",url),$("#diagRequestAdmission").K("show"));else if(e.h.text.startsWith("Cancel"))$.l("BedManagementApiActions/Nursestations/CancelAdmissionRequest?bookingKey="+i,function(t){1==t&&(DevExpress.C.R("Admission request canceled.","success",1500),e.be.ue(0))});else if(e.h.text.startsWith("Patient Medical")){if(1==fromWindows)url=ip+"site-medicaweb/emr.aspx|FreeEMRCaller.exe|"+t+","+n+","+uId+",0,0,0",window.location.href=url;else try{url="/NewPatientRecord/PatientMedicalRecord.html?PatId="+t+"&EpsKey="+n+"&UserID="+uId,childwindowEMR=window.parent.Se(t,t+" "+o,n,0,100,"E"),setTimeout(function(){$(e.Pe).parent().hide()},2e3)}catch(e){}$.l("BedManagementApiActions/WaitingPatients/OpenEMR?pId="+t+"&ek="+n+"&uId="+uId+"&seen="+(""==a||void 0==a?0:1),function(e){}),selectedNotOnBed.J(new Date)}else e.h.text.startsWith("Reassign")&&(moveInfo="ReassignDoctor",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(e,o){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' bedKey='0' sKey='"+i+"' patientId='"+t+"' episodeKey='"+n+"' onclick='selectDoctor(this,\""+jsonErDoctors[e].S+","+jsonErDoctors[e].P+"\");'><td>"+jsonErDoctors[e].P+"</td></tr>")}))};function GetColorByStatus(e){var t="";return null!=triageLevels&&0!=e&&$.N(triageLevels,function(n,i){if(i.q==e)return t=i.Me,!1}),t}var NursestationViewModel=function(){var e=this;e.We=ko.Re(wbType),e.Ce=ko.Oe([]),e.we=ko.Re(),e._=ko.Oe([]),e.B=ko.Oe([]),e.Ee=ko.Re(),e.De=ko.Re(),e.Ge=ko.Re(),e.Fe=ko.Re(),e.Le=ko.Re(),e.Ke=ko.Re(),e.je=ko.Re(),$.l("BedManagementApiActions/WaitingPatients/GetUserKey?uId="+uId,function(t){uKey=t,$.l("BedManagementApiActions/Nursestations/GetSysParams?hospId="+hospitalid,function(t){e.Ee(t.Ee),e.De(t.De),e.Ge(t.Ge),e.Fe(t.Fe),e.qe=ko.Re(t.qe),e.Ue=ko.Re(t.Ue),e.He=ko.Re(t.He),ER_EnableFastTriage=t.qe,ER_EnableBilling=t.Ue,Enable_Alphanumric_PID=t.He,e.ze(e),e.Xe=ko.Re(ERstartTime),e.Ve=ko.Re(ERavgTime),e.Je=ko.Re(ERmaxTime);var n=t.Ze.split("|");for(i=0;i<n.length;i++){var o=n[i];o.indexOf("~")>-1&&("newborn"==o.split("~")[0].toLowerCase()?newborn=o.split("~")[1].replace(">","").replace("<",""):"infant"==o.split("~")[0].toLowerCase()?infant=o.split("~")[1].replace(">","").replace("<",""):"child"==o.split("~")[0].toLowerCase()?child=o.split("~")[1].replace(">","").replace("<",""):"adult"==o.split("~")[0].toLowerCase()&&(adult=o.split("~")[1].replace(">","").replace("<","")))}$.l("BedManagementApiActions/Nursestations/GetTriageLevels",function(t){var n=$.map(t,function(e){return new TriageLevels(e)});e.Ce(n),triageLevelsCount=e.Ce().length,triageLevels=t,$.l("BedManagementApiActions/Nursestations/GetAllNurseStationsWithAlertsER?startDate="+currDate.toLocaleDateString()+"&NsType="+wbType+"&uId="+uId+"&hospId="+hospitalid,function(t){var n=$.map(t,function(e){return new Nursestation(e)});e._(n)}),$.l("BedManagementApiActions/Nursestations/GetNurseStationsWithAlertsERWithoutAssign?startDate="+currDate.toLocaleDateString()+"&NsType="+wbType+"&hospId="+hospitalid,function(e){$.N(e,function(e,t){void 0!=t&&subMnuNSs.push({id:t.v,text:t.U,m:"images/beacon_light.png",visible:!0})})})})})}),e.Qe=ko.Re(),e.Ye=ko.Re(),e.et=ko.Re("erInTrSmall"),e.tt=ko.Re("nsERWPSmall"),e.nt=ko.Re("erDetailed"),e.ze=function(){var t=e.De().split(",");t.length>=3&&(ERstartTime=t[0],ERavgTime=t[1],ERmaxTime=t[2]);var n=e.Ge().split("|");for(i=0;i<n.length;i++){var o=n[i].split("^")[1].split(",");o.length>=3&&(TRGstartTime.push(o[0]),TRGavgTime.push(o[1]),TRGmaxTime.push(o[2]))}var s=e.Fe().split("|");for(i=0;i<s.length;i++){var a=s[i].split("^")[1].split(",");a.length>=3&&(WAstartTime.push(a[0]),WAavgTime.push(a[1]),WAmaxTime.push(a[2]))}},e.it=function(e){return ko.Re(GetColorByStatus(e))}},TriageLevels=function(e){this.ot=ko.Re(e.ot),this.q=ko.Re(e.q),this.U=ko.Re(e.U),this.Me=ko.Re(e.Me)},ErDoctors=function(e){this.S=ko.Re(e.S),this.P=ko.Re(e.P)};function UpdateMnuWps(e){mnuWPs=[{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"},{id:"0",text:"Move to Holding bay",m:"images/moveto.png"}],mnuWPsToTriaged=1!=ER_EnableFastTriage?[{id:"0",text:"Triage Patient Assessment",m:"images/list_accept.png"},{id:"0",text:"Cancel Registration",m:"images/Discharge-Order.png"}]:[{id:"0",text:"Triage Patient Assessment",m:"images/list_accept.png"},{id:"0",text:"Cancel Registration",m:"images/Discharge-Order.png"},{id:"0",text:"         ___________________________"},{id:"0",text:"Fast Triage & Move to Holding bay",m:"images/moveto.png"}],mnuTrtmsOnBed=[{id:"0",text:"Patient Medical Record",m:"images/Patient-Medical-Record.png"},{id:"0",text:"Request for Admission",m:"images/Request-for-Admission.png",visible:!0},{id:"0",text:"Cancel admission request",m:"images/Request-for-Admission.png",visible:!1},{id:"0",text:"Discharge Order",m:"images/Discharge-Order.png"},{id:"0",text:"Reassign Doctor",m:"images/reassign.png"},{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"},{id:"0",text:"Move to Holding bay",m:"images/moveto.png"}],mnuTrtmsNotOnBed=[{id:"0",text:"Patient Medical Record",m:"images/Patient-Medical-Record.png"},{id:"0",text:"Request for Admission",m:"images/Request-for-Admission.png",visible:!0},{id:"0",text:"Cancel admission request",m:"images/Request-for-Admission.png",visible:!1},{id:"0",text:"Discharge Order",m:"images/Discharge-Order.png"},{id:"0",text:"Reassign Doctor",m:"images/reassign.png"},{id:"0",text:"Transfer to another Emergency Area",m:"images/transfare.png",u:subMnuNSs,visible:!0},{id:"0",text:"         ___________________________"}],ko.$.T(e.B(),function(e){ko.$.T(e.I(),function(e){0!=e.p()&&null!=e.p()||(mnuWPs.push({id:e.v(),text:'Move to "'+e.U()+'"',m:"images/Bed.png"}),1==ER_EnableFastTriage&&mnuWPsToTriaged.push({id:e.v(),text:'Fast Triage & Move to "'+e.U()+'"',m:"images/Bed.png"}),mnuTrtmsNotOnBed.push({id:e.v(),text:'Move to "'+e.U()+'"',m:"images/Bed.png"}),mnuTrtmsOnBed.push({id:e.v(),text:'Move to "'+e.U()+'"',m:"images/Bed.png"}))})})}var Nursestation=function(e){var t=this;t.v=ko.Re(e.v),t.U=ko.Re(e.U),t.st=ko.Re("/images/"+e.st),t.at=ko.Re(e.at),t.rt=ko.Re(e.rt),t.dt=ko.Re(e.dt),t.ct=ko.Re(e.ct),t.lt=ko.Re(e.lt),t.ut=ko.Re(e.ut),t.pt=ko.Re(e.pt),t.gt=ko.Re(e.gt),t.ft=ko.Re(e.ft),t.kt=ko.Re(e.kt),t.ht=ko.Re(e.ht),t.Tt=ko.Re(e.Tt),t.$t=ko.Re(e.$t),t._t=ko.Oe([]),t.O=ko.Oe([]),t.vt=ko.Oe([]),t.B=ko.Oe([]),t.yt=ko.Oe([]),t.Bt=ko.Oe([]),t.It=ko.Re(),t.xt=ko.Re(),t.Nt=ko.Re(),t.bt=ko.Re(),t.St=ko.Re(),t.Pt=ko.Re(),t.At=ko.Re(),t.Mt=ko.Re(),t.Wt=ko.Re(),t.Rt=ko.Re(),t.Ct=ko.Re(),t.Ot=ko.Re(),t.wt=ko.Re(),t.Et=ko.Re(),t.Dt=ko.Re(),t.Gt=ko.Re(),t.Ft=ko.Re(),t.Lt=ko.Re(),t.Kt=ko.Re(),t.jt=ko.Re(),t.qt=ko.Re(),t.Ut=ko.Re(),t.Ht=ko.Re(),t.zt=ko.Re(),t.Xt=ko.Re(),t.Vt=ko.Re(),t.Jt=ko.Re(),t.Zt=ko.Re(),t.vt=ko.Qt(function(){return t.O().sort(function(e,t){return parseInt(e.F().toString().replace(0,10))-parseInt(t.F().toString().replace(0,10))})});var n=$.map(e.Yt,function(e){return new WaitingPatient(e)});t.O(n),setInterval(function(){var e=0,n=0,i=0,o=0,s=0,a=0,r=0,d=0,c=0,l=0,m=0,u=0,p=0,g=0,f=0,k=0,h=0,T=0,_=0,v=0,y=0,B=0,I=0,x=0;ko.$.T(t.O(),function(t){1==t.F()?parseInt(t.en())>=ERmaxTime?n+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?d+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?g+=1:parseInt(t.en())<ERstartTime&&(v+=1):2==t.F()?parseInt(t.en())>=ERmaxTime?i+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?c+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?f+=1:parseInt(t.en())<ERstartTime&&(y+=1):3==t.F()?parseInt(t.en())>=ERmaxTime?o+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?l+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?k+=1:parseInt(t.en())<ERstartTime&&(B+=1):4==t.F()?parseInt(t.en())>=ERmaxTime?s+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?m+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?h+=1:parseInt(t.en())<ERstartTime&&(I+=1):5==t.F()?parseInt(t.en())>=ERmaxTime?a+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?u+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?T+=1:parseInt(t.en())<ERstartTime&&(x+=1):parseInt(t.en())>=ERmaxTime?e+=1:parseInt(t.en())<ERmaxTime&&parseInt(t.en())>=ERavgTime?r+=1:parseInt(t.en())<ERavgTime&&parseInt(t.en())>=ERstartTime?p+=1:parseInt(t.en())<ERstartTime&&(_+=1)}),t.It(e),t.xt(n),t.Nt(i),t.bt(o),t.St(s),t.Pt(a),t.At(r),t.Mt(d),t.Wt(c),t.Rt(l),t.Ct(m),t.Ot(u),t.wt(p),t.Et(g),t.Dt(f),t.Gt(k),t.Ft(h),t.Lt(T),t.Kt(_),t.jt(v),t.qt(y),t.Ut(B),t.Ht(I),t.zt(x),t.Xt(parseInt(n)+parseInt(i)+parseInt(o)+parseInt(s)+parseInt(a)),t.Vt(parseInt(d)+parseInt(c)+parseInt(l)+parseInt(m)+parseInt(u)),t.Jt(parseInt(g)+parseInt(f)+parseInt(k)+parseInt(h)+parseInt(T)),t.Zt(parseInt(v)+parseInt(y)+parseInt(B)+parseInt(I)+parseInt(x)),$("li.try_nums span").N(function(){"0"==$(this).text()?$(this).parent("li.try_nums").tn("ani_stop"):$(this).parent("li.try_nums").nn("ani_stop")})},1e3),setTimeout(function(){$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})})},1e3),t.in=ko.Re(),t.on=ko.Re(),t.sn=ko.Re(),t.an=ko.Re(),t.rn=ko.Re(),t.dn=ko.Re(),t.Ae=ko.Re(),t.cn=ko.Re(),t.ln=ko.Re(),t.mn=ko.Re(),t.un=ko.Re(),t.pn=ko.Re(),t.gn=ko.Re();var o=$.map(e.fn,function(e){return new RoomAndBeds(e)});t.B(o),jsonRoomsAndBeds=t.B();var s=0,a=0,r=0,d=0,c=0,l=0,m=0,u=0,p=0,g=0,f=0,k=0,h=0;ko.Qt(function(){s=0,a=0,r=0,d=0,c=0,l=0,m=0,u=0,p=0,g=0,f=0,k=0,h=0,ko.$.T(t.B(),function(e){ko.$.T(e.I(),function(e){0!=e.p()?(u+=1,1==e.Y()?k+=1:2==e.Y()&&(h+=1),1==e.F()?s+=1:2==e.F()?a+=1:3==e.F()?r+=1:4==e.F()?d+=1:5==e.F()&&(c+=1)):(p+=1,"vacant clean"==e.me()?g+=1:"vacant dirty"==e.me()&&(f+=1))}),ko.$.T(e.Ae(),function(e){m+=1,1==e.F()?s+=1:2==e.F()?a+=1:3==e.F()?r+=1:4==e.F()?d+=1:5==e.F()&&(c+=1)}),l=u+m}),t.in(s),t.on(a),t.sn(r),t.an(d),t.rn(c),t.dn(l),t.Ae(m),t.cn(u),t.ln(p),t.pn(k),t.gn(h),t.mn(g),t.un(f)}),MnuesAttached.push({kn:!1,hn:t.v()}),t.Tn=function(){var e=ko.Oe([]);ko.$.T(t.B(),function(t){ko.$.T(t.I(),function(t){ko.$.T(t.$e(),function(t){e.push(t)})})}),$.l("BedManagementApiActions/Rooms/GetErRoomsWBedsWStatus?NS_id="+t.v()+"&startDate="+currDate.toLocaleDateString()+"&uId="+uId,function(n){var i=$.map(n,function(e){return new RoomAndBeds(e)});t.B(i),jsonRoomsAndBeds=t.B(),ko.$.T(t.B(),function(t){ko.$.T(t.I(),function(t){ko.$.T(e(),function(e){e.p()==t.p()&&t.$e.push(e)})})});var o=0,s=0,a=0,r=0,d=0,c=0,l=0,m=0,u=0,p=0,g=0,f=0,k=0;ko.Qt(function(){o=0,s=0,a=0,r=0,d=0,c=0,l=0,m=0,u=0,p=0,g=0,f=0,k=0,ko.$.T(t.B(),function(e){ko.$.T(e.I(),function(e){0!=e.p()?(m+=1,1==e.Y()?f+=1:2==e.Y()&&(k+=1),1==e.F()?o+=1:2==e.F()?s+=1:3==e.F()?a+=1:4==e.F()?r+=1:5==e.F()&&(d+=1)):(u+=1,"vacant clean"==e.me()?p+=1:"vacant dirty"==e.me()&&(g+=1))}),ko.$.T(e.Ae(),function(e){l+=1,1==e.F()?o+=1:2==e.F()?s+=1:3==e.F()?a+=1:4==e.F()?r+=1:5==e.F()&&(d+=1)}),c=m+l}),t.in(o),t.on(s),t.sn(a),t.an(r),t.rn(d),t.dn(c),t.Ae(l),t.cn(m),t.ln(u),t.pn(f),t.gn(k),t.mn(p),t.un(g)}),UpdateMnuWps(t),$("#try_extb"+t.v()+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+t.v()+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})})})},t.$n=function(){$.l("BedManagementApiActions/WaitingPatients/GetWpByERNs?NS_id="+openedNS+"&hospId="+hospitalid,function(e){var n=$.map(e,function(e){return new WaitingPatient(e)});ko.$.T(vm._(),function(e){e.v()==openedNS&&e.O(n)}),UpdateMnuWps(t),$("#try_exta"+t.v()+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+t.v()+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})})})},t._n=ko.Re(),t.vn=function(e,n){if($($("#nsWp"+t.v()).Bn(3)[2]).yn("panelfullwidthSel"))$($("#nsWp"+t.v()).parent()[0]).In(),$($("#nsWp"+t.v()).Bn(3)[2]).L("class","panelfullwidthS"),$('table[data-area="sec_header_area"]').hide(),$('table[data-area="main_header_area"]').show();else{$(".panelfullwidthSel").L("class","panelfullwidthS"),$(".accContent").In(),$('table[data-area="sec_header_area"]').hide(),$('table[data-area="main_header_area"]').show(),$($("#nsWp"+t.v()).parent()[0]).xn(),$($("#nsWp"+t.v()).Bn(3)[2]).L("class","panelfullwidthSel"),$($("#nsWp"+t.v()).parent()[0]).Nn().children("table[data-area='sec_header_area']").show(),$($("#nsWp"+t.v()).parent()[0]).Nn().children("table[data-area='main_header_area']").hide(),t._n(e),vm.Ye(e),openedNS=t.v(),$.l("BedManagementApiActions/WaitingPatients/GetERShiftDoctors?hospId="+hospitalid,function(e){var n=$.map(e,function(e){return new ErDoctors(e)});jsonErDoctors=e,t.yt(n)});var o=$("#chartWPs"+openedNS).bn("instance");void 0!=o&&o.Sn();var s=$("#chartTrts"+openedNS).bn("instance");void 0!=s&&s.Sn();var a=$("#chartBeds"+openedNS).Pn("instance");for(void 0!=a&&a.Sn(),UpdateMnuWps(e),i=0;i<MnuesAttached.length;i++)if(MnuesAttached[i].hn==openedNS&&0==MnuesAttached[i].kn){$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),MnuesAttached[i].kn=!0;break}$("#txtWpSearch"+openedNS).An(function(){if(""!=$(this).Mn()){var e=$("#tblWP"+openedNS+" tbody").find("tr").hide(),t=$(this).Mn().split(" ");$.N(t,function(t,n){e.find("td:nth-child(4)").filter(":containsIN('"+n+"')").parent().show(),e.find("td:nth-child(4)").filter(":containsIN('"+n+"')").parent().Nn().show(),e.find("td:nth-child(5)").filter(":containsIN('"+n+"')").parent().show(),e.find("td:nth-child(5)").filter(":containsIN('"+n+"')").parent().Nn().show()})}else e=$("#tblWP"+openedNS+" tbody").find("tr").show()}),$("#txtTrtSearch"+openedNS).An(function(){if(""!=$(this).Mn()){var e=$(this).Bn(2).next().children().Wn().find("tbody tr").hide(),t=$(this).Mn().split(" ");$.N(t,function(t,n){e.find("td:nth-child(3)").filter(":containsIN('"+n+"')").parent().show(),e.find("td:nth-child(3)").filter(":containsIN('"+n+"')").parent().Nn().show(),e.find("td:nth-child(4)").filter(":containsIN('"+n+"')").parent().show(),e.find("td:nth-child(4)").filter(":containsIN('"+n+"')").parent().Nn().show()})}else e=$(this).Bn(2).next().children().Wn().find("tbody tr").show()}),0==vw||(1==vw?($("div[data-original-title='Minimize']").parent().Ie("cssText","display:none !important;"),$("#try_extb"+e.v()).hide(),$("#try_exta"+e.v()).L("class","col-md-10")):2==vw&&($("div[data-original-title='Minimize']").parent().Ie("cssText","display:none !important;"),$("div[data-original-title='Minimize']").parent().Ie("cssText","display:none !important;"),$("#try_exta"+e.v()).hide(),$("#try_extb"+e.v()).L("class","col-md-10"))),$.A({timeout:3e4,url:"BedManagementApiActions/WaitingPatients/GetInitialReceive?CategoryName=ER ALERTS",W:function(e){console.log("GetInitialReceive"),ko.$.T(t.B(),function(t){ko.$.T(t.I(),function(t){0==$.Rn(e)&&$.N(e,function(n,o){if(0==(void 0==e[n].p)){if(void 0!=e[n]&&t.p()==e[n].p)if("Add"==e[n].Cn){var s=!1;ko.$.T(t.$e(),function(t){if(t.On().toLowerCase().trim()==e[n].On.toLowerCase().trim()){var o=t.wn().toLowerCase().split("\n"),a=!1;for(i=0;i<o.length;i++)if(o[i].toLowerCase()==e[n].wn.toLowerCase()){a=!0;break}0==a&&t.wn(t.wn()+"\n"+e[n].wn),s=!0}}),0==s&&t.$e.push(new BedAlerts(e[n]))}else alertBed.On().toLowerCase()==e[n].On.toLowerCase()&&t.$e.remove(alertBed)}else if(void 0!=e[n]&&t.p()==e[n].En)if("Add"==e[n].Dn){s=!1;ko.$.T(t.$e(),function(t){if(t.On().toLowerCase().trim()==e[n].Gn.toLowerCase().trim()){var o=t.wn().toLowerCase().split("\n"),a=!1;for(i=0;i<o.length;i++)if(o[i].toLowerCase()==e[n].Fn.toLowerCase()){a=!0;break}0==a&&t.wn(t.wn()+"\n"+e[n].Fn),s=!0}}),0==s&&t.$e.push(new BedAlerts(e[n]))}else alertBed.On().toLowerCase()==e[n].Gn.toLowerCase()&&t.$e.remove(alertBed)})})})},global:!1,M:"json"})}},this.Ln=function(e,t){},t.Kn=ko.Qt(function(){var e=ko.Oe([{jn:"Not Triaged",qn:t.Kt(),Un:t.wt(),Hn:t.At(),zn:t.It()}]),n=0;try{ko.$.T(vm.Ce(),function(i){switch(++n){case 1:e.push({jn:i.U(),qn:t.jt(),Un:t.Et(),Hn:t.Mt(),zn:t.xt()});break;case 2:e.push({jn:i.U(),qn:t.qt(),Un:t.Dt(),Hn:t.Wt(),zn:t.Nt()});break;case 3:e.push({jn:i.U(),qn:t.Ut(),Un:t.Gt(),Hn:t.Rt(),zn:t.bt()});break;case 4:e.push({jn:i.U(),qn:t.Ht(),Un:t.Ft(),Hn:t.Ct(),zn:t.St()});break;case 5:e.push({jn:i.U(),qn:t.zt(),Un:t.Lt(),Hn:t.Ot(),zn:t.Pt()})}})}catch(e){}return e}),t.Xn={Vn:t.Kn,Jn:!1,wn:{enabled:!1,location:"edge",Zn:function(){return this.Qn+" = "+this.valueText}},Yn:{type:"stackedBar",label:{position:"inside",visible:!0,ei:!1,backgroundColor:"transparent",font:{}}},ti:function(e){},ni:[{name:"00-"+ERstartTime,ii:"triage",oi:"st",color:"#00DD2F"},{name:ERstartTime+"-"+ERavgTime,ii:"triage",oi:"nd",color:"#FFDC08"},{name:ERavgTime+"-"+ERmaxTime,ii:"triage",oi:"rd",color:"#FF0000"},{name:"+"+ERmaxTime,ii:"triage",oi:"th",color:"#C90707"}],si:{visible:!1,opacity:.5,ai:1},ri:{visible:!1,opacity:.5},di:{visible:!1,ci:"bottom",li:"center",mi:"100"}},t.ui=ko.Qt(function(){var e=ko.Oe([]);try{3==triageLevelsCount?e.push({pi:"Triage",gi:vm.Ce()[0].U(),fi:t.in(),ki:vm.Ce()[1].U(),hi:t.on(),Ti:vm.Ce()[2].U(),$i:t.sn()}):e.push({pi:"Triage",gi:vm.Ce()[0].U(),fi:t.in(),ki:vm.Ce()[1].U(),hi:t.on(),Ti:vm.Ce()[2].U(),$i:t.sn(),_i:vm.Ce()[3].U(),vi:t.an(),yi:vm.Ce()[4].U(),Bi:t.rn()})}catch(e){}return e}),t.Ii=3==triageLevelsCount?{Vn:t.ui,Jn:!1,Yn:{type:"bar",label:{position:"inside",visible:!0,ei:!1,backgroundColor:"transparent",font:{}}},ti:function(e){},ni:[{name:"C1",ii:"t1",oi:"c1",color:GetColorByStatus(1)},{name:"C2",ii:"t2",oi:"c2",color:GetColorByStatus(2)},{name:"C3",ii:"t3",oi:"c3",color:GetColorByStatus(3)}],si:{visible:!1,opacity:.5,ai:1},ri:{visible:!1,opacity:.5},di:{visible:!1}}:{Vn:t.ui,Jn:!1,Yn:{type:"bar",label:{position:"inside",visible:!0,ei:!1,backgroundColor:"transparent",font:{}}},ti:function(e){},ni:[{name:"C1",ii:"t1",oi:"c1",color:GetColorByStatus(1)},{name:"C2",ii:"t2",oi:"c2",color:GetColorByStatus(2)},{name:"C3",ii:"t3",oi:"c3",color:GetColorByStatus(3)},{name:"C4",ii:"t4",oi:"c4",color:GetColorByStatus(4)},{name:"C5",ii:"t5",oi:"c5",color:GetColorByStatus(5)}],si:{visible:!1,opacity:.5,ai:1},ri:{visible:!1,opacity:.5},di:{visible:!1}},t.xi=ko.Qt(function(){return ko.Oe([{I:"V. Clean",count:t.ln()},{I:"V. Dirty",count:t.un()},{I:"Male",count:t.pn()},{I:"Female",count:t.gn()}])}),t.Ni={Vn:t.xi,wn:{enabled:!1},label:{position:"inside",visible:!0,ei:!1,backgroundColor:"transparent",font:{}},ni:[{type:"doughnut",name:"Beds",ii:"beds",oi:"count",label:{position:"inside",visible:!0}}],palette:["rgb(113, 168, 67)","#ff7c00","#74d0f4","#ee8090"],di:{visible:!1,ci:"bottom",li:"center"}},t.bi=function(e){ko.$.T(ns.B(),function(t){ko.$.T(t.I(),function(t){var n=!1;ko.$.T(t.$e(),function(t){t.On().toLowerCase().trim()==e&&(n=!0)}),n||console.log(t.target)})})}};function dxMnuWP_Showing(e){"0"!=e.F()&&"10"!=e.F()&&null!=e.F()&&($.N(mnuWPs,function(e,t){t.text.startsWith("Transfer")&&$.N(t.u,function(e,t){t.id==openedNS?t.visible=!1:t.visible=!0})}),null!=e&&null!=e.p()&&0!=e.p()&&(dxMnuWP=$("#cxWP"+e.p()).D("instance"),dxMnuWP.Si()))}function dxMnuTrtOnBed_Showing(e){1==e.ke()?$.N(mnuTrtmsOnBed,function(e,t){void 0!=t&&(mnuTrtmsOnBed[e].text.startsWith("Request")?mnuTrtmsOnBed[e].visible=!1:mnuTrtmsOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsOnBed[e].visible=!1))}):e.ue()>0?$.N(mnuTrtmsOnBed,function(e,t){mnuTrtmsOnBed[e].text.startsWith("Request")?mnuTrtmsOnBed[e].visible=!1:mnuTrtmsOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsOnBed[e].visible=!0)}):$.N(mnuTrtmsOnBed,function(e,t){mnuTrtmsOnBed[e].text.startsWith("Request")?mnuTrtmsOnBed[e].visible=!0:mnuTrtmsOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsOnBed[e].visible=!1)}),$.N(mnuTrtmsOnBed,function(e,t){t.text.startsWith("Transfer to")&&$.N(t.u,function(e,t){t.id==openedNS?t.visible=!1:t.visible=!0})}),null==e.J()||""==e.J()?$.N(mnuTrtmsOnBed,function(e,t){void 0!=t&&mnuTrtmsOnBed[e].text.startsWith("Patient Medical")&&!mnuTrtmsOnBed[e].text.endsWith(" (start examination)")&&(mnuTrtmsOnBed[e].text=mnuTrtmsOnBed[e].text+" (start examination)")}):$.N(mnuTrtmsOnBed,function(e,t){void 0!=t&&mnuTrtmsOnBed[e].text.startsWith("Patient Medical")&&mnuTrtmsOnBed[e].text.endsWith(" (start examination)")&&(mnuTrtmsOnBed[e].text=mnuTrtmsOnBed[e].text.replace(" (start examination)",""))}),null!=e.p()&&0!=e.p()&&(dxMnuTrtOnBed=$("#cxOnBed"+e.v()).D("instance")).Si()}function dxMnuTrtNotOnBed_Showing(e){1==e.ke()?$.N(mnuTrtmsNotOnBed,function(e,t){void 0!=t&&(mnuTrtmsNotOnBed[e].text.startsWith("Request")?mnuTrtmsNotOnBed[e].visible=!1:mnuTrtmsNotOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsNotOnBed[e].visible=!1))}):e.ue()>0?$.N(mnuTrtmsNotOnBed,function(e,t){void 0!=t&&(mnuTrtmsNotOnBed[e].text.startsWith("Request")?mnuTrtmsNotOnBed[e].visible=!1:mnuTrtmsNotOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsNotOnBed[e].visible=!0))}):$.N(mnuTrtmsNotOnBed,function(e,t){void 0!=t&&(mnuTrtmsNotOnBed[e].text.startsWith("Request")?mnuTrtmsNotOnBed[e].visible=!0:mnuTrtmsNotOnBed[e].text.startsWith("Cancel")&&(mnuTrtmsNotOnBed[e].visible=!1))}),$.N(mnuTrtmsNotOnBed,function(e,t){t.text.startsWith("Transfer to")&&$.N(t.u,function(e,t){t.id==openedNS?t.visible=!1:t.visible=!0})}),null==e.J()||""==e.J()?$.N(mnuTrtmsNotOnBed,function(e,t){void 0!=t&&mnuTrtmsNotOnBed[e].text.startsWith("Patient Medical")&&!mnuTrtmsNotOnBed[e].text.endsWith(" (start examination)")&&(mnuTrtmsNotOnBed[e].text=mnuTrtmsNotOnBed[e].text+" (start examination)")}):$.N(mnuTrtmsNotOnBed,function(e,t){void 0!=t&&mnuTrtmsNotOnBed[e].text.startsWith("Patient Medical")&&mnuTrtmsNotOnBed[e].text.endsWith(" (start examination)")&&(mnuTrtmsNotOnBed[e].text=mnuTrtmsNotOnBed[e].text.replace(" (start examination)",""))}),(dxMnuTrtNotOnBed=$("#cxNotOnBed"+e.p()).D("instance")).Si()}function selectDoctor(e,t){if(void 0!=t){var n=t.split(",")[0],i=(t.split(",")[1],$(e).L("bedKey")),o=$(e).L("sKey"),s=$(e).L("patientId"),a=$(e).L("episodeKey"),r=$(e).L("tCode");"WPtoBed"==moveInfo?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/MoveWPtoBed?bKey="+i+"&pId="+s+"&ek="+a+"&drId="+n+"&sKey="+o+"&uId="+uId,W:function(e){var t=e;if(null!=t){DevExpress.C.R("Patient moved successfully.","success",1500);try{ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.O(),function(n){if(void 0!=n&&n.p()==s)return ko.$.T(e.B(),function(e){if(t.ve==e.ye())return ko.$.T(e.I(),function(e){if(e.v()==i&&(0==e.p()||null==e.p()||""==e.p())){var n=new RoomBeds(t);return e.sex(n.sex()),e.Z(n.Z()),e.p(n.p()),e.Y(n.Y()),e.j(n.j()),e.ee(n.ee()),e.status(n.status()),e.te(n.te()),e.ne(n.ne()),e.ie(n.ie()),e.oe(n.oe()),e.se(n.se()),e.F(n.F()),e.ae(n.ae()),e._e(n._e()),e.H(n.H()),e.re(n.re()),e.V(n.V()),e.de(n.de()),e.ce(n.ce()),e.X(n.X()),e.le(n.le()),e.me(n.me()),e.icon(n.icon()),e.color(n.color()),e.location(n.location()),e.ue(n.ue()),e.pe(n.pe()),e.ge(n.ge()),e.fe(n.fe()),e.ke(n.ke()),e.he(n.he()),e.Te(n.Te()),e.$e(n.$e()),!1}}),!1}),e.O.remove(n),!1}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),!1})}catch(e){$("#loader-wrapper").Pi("slow",function(){$("#loader-wrapper").hide()})}}else DevExpress.C.R("There is a patient on this bed.","warning",1500)},error:function(e){console.log(e.responseText)}}):"HPtoBed"==moveInfo?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/MoveHPtoBed?bKey="+i+"&pId="+s+"&ek="+a+"&drId="+n+"&sKey="+o+"&uId="+uId,W:function(e){var t=e;DevExpress.C.R("Patient moved successfully.","success",1500),ko.$.T(vm._(),function(e){e.v()==openedNS&&ko.$.T(e.B(),function(n){ko.$.T(n.Ae(),function(e){if(e.p()==s)return n.Be.remove(e),!1}),ko.$.T(n.I(),function(e){if(e.v()==i&&(0==e.p()||null==e.p())){var n=new RoomBeds(t);return e.sex(n.sex()),e.Z(n.Z()),e.p(n.p()),e.Y(n.Y()),e.j(n.j()),e.ee(n.ee()),e.status(n.status()),e.te(n.te()),e.ne(n.ne()),e.ie(n.ie()),e.oe(n.oe()),e.se(n.se()),e.F(n.F()),e.ae(n.ae()),e._e(n._e()),e.H(n.H()),e.re(n.re()),e.V(n.V()),e.de(n.de()),e.ce(n.ce()),e.X(n.X()),e.le(n.le()),e.me(n.me()),e.icon(n.icon()),e.color(n.color()),e.location(n.location()),e.ue(n.ue()),e.pe(n.pe()),e.ge(n.ge()),e.fe(n.fe()),e.ke(n.ke()),e.he(n.he()),e.Te(n.Te()),e.$e(n.$e()),!1}}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})})})})},error:function(e){console.log(e.responseText)}}):"WPtoHP"==moveInfo?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/MoveWPtoHP?bKey="+i+"&pId="+s+"&ek="+a+"&drId="+n+"&sKey="+o+"&uId="+uId,W:function(e){var t=e;DevExpress.C.R("Patient moved successfully.","success",1500);try{ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.O(),function(n){if(void 0!=n&&n.p()==s)return ko.$.T(e.B(),function(e){if(t.ve==e.ye()){var n=new RoomBeds(t);return e.Be.push(n),!1}}),e.O.remove(n),!1}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),!1})}catch(e){$("#loader-wrapper").Pi("slow",function(){$("#loader-wrapper").hide()})}},error:function(e){console.log(e.responseText)}}):"ReassignDoctor"==moveInfo?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/ReassignDoctor?drId="+n+"&sKey="+o+"&pId="+s+"&uId="+uId,W:function(e){var t=e;DevExpress.C.R("Doctor assigned successfully.","success",1500),ko.$.T(vm._(),function(e){e.v()==openedNS&&ko.$.T(e.B(),function(e){ko.$.T(e.Be(),function(e){if(void 0!=e&&e.v()==t.v&&e.p()==t.p)return e.re(t.re),e.V(t.V),!1})})})},error:function(e){console.log(e.responseText)}}):"WPtoBedFast"==moveInfo?$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/FastMoveWPtoBed?tCode="+r+"&bKey="+i+"&pId="+s+"&ek="+a+"&drId="+n+"&sKey="+o+"&uId="+uId+"&cBll="+ER_EnableBilling+"&hospId="+hospitalid,W:function(e){var t=e;null!=t?(DevExpress.C.R("Patient moved successfully.","success",1500),ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.O(),function(n){if(void 0!=n&&n.p()==s)return ko.$.T(e.B(),function(e){if(t.ve==e.ye())return ko.$.T(e.I(),function(e){if(e.v()==i&&(0==e.p()||null==e.p()||""==e.p())){var n=new RoomBeds(t);return e.sex(n.sex()),e.Z(n.Z()),e.p(n.p()),e.Y(n.Y()),e.j(n.j()),e.ee(n.ee()),e.status(n.status()),e.te(n.te()),e.ne(n.ne()),e.ie(n.ie()),e.oe(n.oe()),e.se(n.se()),e.F(n.F()),e.ae(n.ae()),e._e(n._e()),e.H(n.H()),e.re(n.re()),e.V(n.V()),e.de(n.de()),e.ce(n.ce()),e.X(n.X()),e.le(n.le()),e.me(n.me()),e.icon(n.icon()),e.color(n.color()),e.location(n.location()),e.ue(n.ue()),e.pe(n.pe()),e.ge(n.ge()),e.fe(n.fe()),e.ke(n.ke()),e.he(n.he()),e.Te(n.Te()),e.$e(n.$e()),!1}}),!1}),e.O.remove(n),!1}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),!1})):DevExpress.C.R("There is a patient on this bed.","warning",1500)},error:function(e){console.log(e.responseText)}}):"WPtoHPFast"==moveInfo&&$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/FastMoveWPtoHP?tCode="+r+"&bKey="+i+"&pId="+s+"&ek="+a+"&drId="+n+"&sKey="+o+"&uId="+uId+"&cBll="+ER_EnableBilling+"&hospId="+hospitalid,W:function(e){var t=e;DevExpress.C.R("Patient moved successfully.","success",1500),ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.O(),function(n){if(void 0!=n&&n.p()==s)return ko.$.T(e.B(),function(e){if(t.ve==e.ye()){var n=new RoomBeds(t);return e.Be.push(n),!1}}),e.O.remove(n),!1}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}),!1})},error:function(e){console.log(e.responseText)}})}}function selectStatus(e,t){if(void 0!=t){var n=t.split(",")[0],i=(t.split(",")[1],$(e).L("sKey")),o=$(e).L("episodeKey"),s=$(e).L("pId");2==n?$.confirm({title:"Confirm!",content:"Are sure you want to discharge patient?",buttons:{confirm:function(){$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/DischargePatient?ek="+o+"&pId="+s+"&sKey="+i+"&dStatus="+n+"&uId="+uId+"&hospId="+hospitalid,W:function(e){"0"==e&&(DevExpress.C.R("Patient discharged successfully","success",1500),ko.$.T(vm._(),function(e){e.v()==openedNS&&(ko.$.T(e.B(),function(e){ko.$.T(e.Be(),function(t){if(void 0!=t&&t.H()==o)return e.Be.remove(t),!1})}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}))}))}})},cancel:function(){}},animation:"scale",Ai:"zoom"}):$.A({type:"POST",contentType:"application/json; charset=utf-8",M:"json",url:"BedManagementApiActions/WaitingPatients/DischargePatient?ek="+o+"&pId="+s+"&sKey="+i+"&dStatus="+n+"&uId="+uId+"&hospId="+hospitalid,W:function(e){"0"==e&&(DevExpress.C.R("Patient discharged successfully","success",1500),ko.$.T(vm._(),function(e){e.v()==openedNS&&(ko.$.T(e.B(),function(e){ko.$.T(e.Be(),function(t){if(void 0!=t&&t.H()==o)return e.Be.remove(t),!1})}),UpdateMnuWps(e),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtOnBed").N(function(){$(this).D({u:mnuTrtmsOnBed,target:$(this).next(),G:mnuTrtmsOnBedItemClicked})}),$("#try_extb"+openedNS+" .cnxMnuTrtNotOnBed").N(function(){$(this).D({u:mnuTrtmsNotOnBed,target:$(this).next(),G:mnuTrtmsNotOnBedItemClicked})}))}))}})}}function selectTriagePriority(e,t){if(void 0!=t){var n=t.split(",")[0],i=(t.split(",")[1],$(e).L("bedKey")),o=$(e).L("sKey"),s=$(e).L("patientId"),a=$(e).L("episodeKey");i.startsWith("wa")?(moveInfo="WPtoHPFast",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(e,t){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' tCode="+n+" bedKey='"+i.replace("wa","")+"' sKey='"+o+"' patientId='"+s+"' episodeKey='"+a+"' onclick='selectDoctor(this,\""+jsonErDoctors[e].S+","+jsonErDoctors[e].P+"\");'><td>"+jsonErDoctors[e].P+"</td></tr>")})):(moveInfo="WPtoBedFast",$("#doctorsList tbody").empty(),$.N(jsonErDoctors,function(e,t){$("#doctorsList tbody").append("<tr data-dismiss='modal' style='cursor:pointer;' tCode="+n+" bedKey='"+i+"' sKey='"+o+"' patientId='"+s+"' episodeKey='"+a+"' onclick='selectDoctor(this,\""+jsonErDoctors[e].S+","+jsonErDoctors[e].P+"\");'><td>"+jsonErDoctors[e].P+"</td></tr>")}))}}var trtMin=!0;function TrtMaxMin(){trtMin?("none"!=$(".Patient-Banner").Ie("display")&&"WP"==lastBedClick&&($(".Patient-Banner").Mi(),"NotOnBed"==lastBedClick?$("tr[id^='pId']").nn("selected_row_em"):"OnBed"==lastBedClick?$("tr[id^='bedId']").nn("selected_row_em"):"WP"==lastBedClick&&$("tr[id^='wp']").nn("selected_row_em")),trtMin=!1):trtMin=!0}var wpMin=!0;function WPMaxMin(){wpMin?("none"!=$(".Patient-Banner").Ie("display")&&"WP"!=lastBedClick&&($(".Patient-Banner").Mi(),"NotOnBed"==lastBedClick?$("tr[id^='pId']").nn("selected_row_em"):"OnBed"==lastBedClick&&$("tr[id^='bedId']").nn("selected_row_em")),wpMin=!1):wpMin=!0}function btnCollapseAll_click(){}var NsAlerts=function(e){this.Wi=ko.Re(e.Wi),this.On=ko.Re(e.On),this.Ri=ko.Re(e.Ri),this.Ci=ko.Re(e.Ci),this.icon=ko.Re("/images/"+e.icon),this.color=ko.Re(e.color)},RoomAndBeds=function(e){var t=this;t.ye=ko.Re(e.ye),t.Oi=ko.Re(e.Oi),t.wi=ko.Re(e.wi),t.location=ko.Re(e.location),t.x=null==e.location?ko.Re():ko.Re(parseInt(e.location.split(",")[0])+5+"px"),t.y=null==e.location?ko.Re():ko.Re(parseInt(e.location.split(",")[1])+145+"px"),t.rotation=null==e.rotation?ko.Re(0):ko.Re(e.rotation),t.size=ko.Re(e.size),t.width=null==e.size?ko.Re():ko.Re(parseInt(e.size.split(",")[0])-15+"px"),t.height=null==e.size?ko.Re():ko.Re(parseInt(e.size.split(",")[1])-15+"px"),t.Be=ko.Oe($.map(e.I,function(e){return new RoomBeds(e)})),t.Ae=ko.Qt(function(){return ko.$.Ei(t.Be(),function(e){return 1==e._e()})}),t.I=ko.Qt(function(){var e,n;return t.Be().sort(function(e,t){return e.v()==t.v()?e._e()>t._e()?1:-1:e.v()>t.v()?1:-1}),bedsArray=ko.Oe([]),ko.$.T(t.Be(),function(t){t.v()!=e&&bedsArray.push(t),e=t.v()}),ko.$.T(bedsArray(),function(e){if(1==e._e()){var i=ko.toJSON(e);n=JSON.parse(i),t.Be.push(new RoomBeds(n)),e.sex("free"),e.p(""),e.Y(""),e.j(""),e.ee(""),e.status(""),e.te(""),e.ne(""),e.ie(""),e.oe(""),e.se(""),e.ae=ko.Re("lightgray"),e.F=ko.Re("0"),e._e(""),e.H(""),e.re(""),e.V(""),e.de(""),e.X(""),e.le(""),e.Di(""),e.wi(""),e.me("")}}),bedsArray.sort(function(e,t){return e.v-t.v})}),t.Gi=function(e,t){$("#roomId"+e.ye()).Fi(),$("#roomId"+e.ye()).draggable()};var n=0;t.Li=function(e,t){n+=1,$("#roomId"+e.ye()).Ie({Ki:"rotate("+n+"deg)",ji:"rotate("+n+"deg)",qi:"rotate("+n+"deg)",Ui:"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),$("#degreeR"+e.ye()).text(n)},t.Hi=function(e,t){n-=1,$("#roomId"+e.ye()).Ie({Ki:"rotate("+n+"deg)",ji:"rotate("+n+"deg)",qi:"rotate("+n+"deg)",Ui:"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),$("#degreeR"+e.ye()).text(n)},t.zi=function(e,t){n+=5,$("#roomId"+e.ye()).Ie({Ki:"rotate("+n+"deg)",ji:"rotate("+n+"deg)",qi:"rotate("+n+"deg)",Ui:"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),$("#degreeR"+e.ye()).text(n)},t.Xi=function(e,t){n-=5,$("#roomId"+e.ye()).Ie({Ki:"rotate("+n+"deg)",ji:"rotate("+n+"deg)",qi:"rotate("+n+"deg)",Ui:"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),$("#degreeR"+e.ye()).text(n)},t.Vi=function(){}},WaitingPatient=function(e){var t=this;t.Ji=ko.Re(e.Ji),t.Zi=ko.Re(e.Zi),t.Qi=ko.Re(e.Qi),t.g=ko.Re(e.g),t.p=ko.Re(e.p),t.k=ko.Re(e.k),t.Yi=ko.Re(e.Yi),t.ie=ko.Re(e.ie),t.eo=ko.Re(e.eo),t.to=ko.Re(e.to),t.no=ko.Re(e.no),t.F=ko.Re(e.F),IsNumeric(e.F)&&0!=e.F&&10!=e.F?t.ae=ko.Re(GetColorByStatus(e.F)):(t.ae=ko.Re("lightgray"),t.F=ko.Re("0")),t.se=ko.Re(e.se),t._e=ko.Re(e._e),t.ee=ko.Re(e.ee),t.j=ko.Re(e.j),t.io=ko.Re(e.io);var n=new Date-new Date(e.io),i=Math.floor(n/31536e6);isNaN(i)?t.ne=ko.Re():t.ne=ko.Re(Math.round(parseInt(i))),t.Y=ko.Re(e.Y),t.oo=ko.Re(),t.so=ko.Re(),1==e.Y?(t.sex=ko.Re("occupiedMale"),t.ao=ko.Re("Male"),t.Z=ko.Re("assets/images/male.png"),t.ne()<=newborn?(t.oo=ko.Re("assets/images/age/baby-boy.png"),t.so=ko.Re("Newborn Male")):t.ne()>newborn&&t.ne()<=infant?(t.oo=ko.Re("assets/images/age/boy.png"),t.so=ko.Re("Infant Male")):t.ne()>infant&&t.ne()<=child?(t.oo=ko.Re("assets/images/age/boy.png"),t.so=ko.Re("Child Male")):t.ne()>child&&(t.oo=ko.Re("assets/images/user.png"),t.so=ko.Re("Male"))):2==e.Y?(t.sex=ko.Re("occupiedFemale"),t.ao=ko.Re("Female"),t.Z=ko.Re("assets/images/female.png"),t.ne()<=newborn?(t.oo=ko.Re("assets/images/age/baby-girl.png"),t.so=ko.Re("Newborn Female")):t.ne()>newborn&&t.ne()<=infant?(t.oo=ko.Re("assets/images/age/girl.png"),t.so=ko.Re("Infant Female")):t.ne()>infant&&t.ne()<=child?(t.oo=ko.Re("assets/images/age/girl.png"),t.so=ko.Re("Child Female")):t.ne()>child&&(t.oo=ko.Re("assets/images/user_female.png"),t.so=ko.Re("Female"))):(t.Z=ko.Re(""),t.ao=ko.Re(""),t.sex=ko.Re("free")),t.ro=ko.Re(e.ro),t.do=ko.Re(e.do),t.en=ko.Re(),t.co=ko.Re(),t.lo=ko.Re(),t.mo=ko.Re(),t.uo=ko.Re(),t.po=ko.Re(),t.fo=function(){if(""!=t.eo()&&void 0!=t.eo()){var e=0;(e=Math.floor(new XDate(t.eo()).ko(new XDate(serverTimeProcessed))))<0&&(e=0),e>ERmaxTime?t.en("+"+ERmaxTime):t.en(e),e<ERstartTime?t.mo("#00FF00"):e>=ERstartTime&&e<ERavgTime?t.mo("yellow"):e>=ERavgTime&&e<ERmaxTime?t.mo("red"):e>=ERmaxTime&&t.mo("red");var n=0;switch(""!=t.se()&&void 0!=t.se()&&(n=Math.floor(new XDate(t.se()).ko(new XDate(serverTimeProcessed)))),n<0&&(n=0),t.F()){case"1":intTRGstartTime=TRGstartTime[0],intTRGavgTime=TRGavgTime[0],intTRGmaxTime=TRGmaxTime[0];break;case"2":intTRGstartTime=TRGstartTime[1],intTRGavgTime=TRGavgTime[1],intTRGmaxTime=TRGmaxTime[1];break;case"3":intTRGstartTime=TRGstartTime[2],intTRGavgTime=TRGavgTime[2],intTRGmaxTime=TRGmaxTime[2];break;default:intTRGstartTime=30,intTRGavgTime=45,intTRGmaxTime=60}"1"!=t.F()&&"2"!=t.F()&&"3"!=t.F()&&"4"!=t.F()&&"5"!=t.F()||(n>intTRGmaxTime?t.co("+"+intTRGmaxTime):t.co(n),n<intTRGstartTime?t.uo("#00FF00"):n>=intTRGstartTime&&n<intTRGavgTime?t.uo("yellow"):n>=intTRGavgTime&&n<intTRGmaxTime?t.uo("red"):n>=intTRGmaxTime&&t.uo("darkred")),$(".wMinutes").N(function(){-1!=$(this).text().indexOf("+")&&"try_nums"!=$(this).L("class")&&$(this).tn("try_nums")}),$(".tMinutes").N(function(){-1!=$(this).text().indexOf("+")&&"try_nums"!=$(this).L("class")&&$(this).tn("try_nums")})}},t.ho=function(){},setInterval(t.fo,4e3),t.To=function(e,t){$("tr[id^='wp']").nn("selected_row_em"),$("tr[id^='bedId']").nn("selected_row_em"),$("tr[id^='pId']").nn("selected_row_em"),"none"==$(".Patient-Banner").Ie("display")?($(".Patient-Banner").Mi(),$("#wp"+e.p()).tn("selected_row_em")):null!=clickedWP&&clickedWP.p()==e.p()?$(".Patient-Banner").Mi():$("#wp"+e.p()).tn("selected_row_em");try{var n=new XDate(e.io());$("#pbBDate").text(n.toString("yyyy MMM dd")+"("+e.ne()+"y)")}catch(e){}1==e.Y()?$("#pbGender").text("Male"):2==e.Y()&&$("#pbGender").text("Female"),$("#pbName").text(e.j()),$("#pbMRN").text(e.p()),clickedWP=e,lastBedClick="WP"},t.$o=function(e,t){selectedWP=e,dxMnuWP_Showing(e),"0"==selectedWP.F()||"10"==selectedWP.F()||null==selectedWP.F()?($("#tblWP"+openedNS+" .dx-menu-item-text").filter(":containsIN('Fast')").parent().parent().L("data-toggle","modal"),$("#tblWP"+openedNS+" .dx-menu-item-text").filter(":containsIN('Fast')").parent().parent().L("data-target","#diagTriagePriority")):($("#tblWP"+openedNS+" .dx-menu-item-text").filter(":containsIN('Move to')").parent().parent().L("data-toggle","modal"),$("#tblWP"+openedNS+" .dx-menu-item-text").filter(":containsIN('Move to')").parent().parent().L("data-target","#diagDoctors"))}};function checkChild(){childwindow.closed&&(clearInterval(timer),AfterSheetClose())}function AfterSheetClose(){console.log("AfterAdmissionClose"),ko.$.T(vm._(),function(e){if(e.v()==openedNS)return ko.$.T(e.O(),function(t){if(void 0!=t&&void 0!=selectedWP)try{if(t.p()==selectedWP.p())return e.O.remove(t),$.l("BedManagementApiActions/WaitingPatients/GetSingleWp?pId="+t.p()+"&hospId="+hospitalid,function(t){var n=new WaitingPatient(t);e.O.push(n),$("#try_exta"+openedNS+" .cnxMnuWp").N(function(){$(this).D({u:mnuWPs,target:$(this).next(),G:mnuWPsItemClicked})}),$("#try_exta"+openedNS+" .cnxMnuWpToTriage").N(function(){$(this).D({u:mnuWPsToTriaged,target:$(this).next(),G:mnuWPsToTriageItemClicked})})}),!1}catch(e){$("#loader-wrapper").Pi("slow",function(){$("#loader-wrapper").hide()})}}),!1})}var RoomBeds=function(e){this.v=ko.Re(e.v),this.ve=ko.Re(e.ve),this.Oi=ko.Re(e.Oi),this._o=ko.Re(e._o),this.active=ko.Re(e.active),this.vo=ko.Re(e.vo),this.yo=ko.Re(e.yo),this.Bo=ko.Re(e.Bo),this.U=ko.Re(e.U),1==e.Y?(this.sex=ko.Re("occupiedMale"),this.Z=ko.Re("M")):2==e.Y?(this.sex=ko.Re("occupiedFemale"),this.Z=ko.Re("F")):(this.sex=ko.Re("free"),this.Z=ko.Re("")),this.Io=ko.Re(e.Io),this.p=ko.Re(e.p),this.Y=ko.Re(e.Y),this.j=ko.Re(e.j),this.ee=ko.Re(e.ee),this.status=ko.Re(e.status),this.te=ko.Re(e.te),this.ne=ko.Re();try{var t=this.te().split(" ")[0].split("/");xd=new XDate(t[2],t[1]-1,t[0]);var n=new Date-new Date(xd.toString()),i=Math.floor(n/31536e6);isNaN(i)?this.ne():this.ne(i)}catch(e){}this.ie=ko.Re(e.ie),this.oe=ko.Re(e.oe),this.se=ko.Re(e.se),this.F=ko.Re(e.F),IsNumeric(e.F)&&0!=e.F&&10!=e.F?this.ae=ko.Re(GetColorByStatus(e.F)):(this.ae=ko.Re("lightgray"),this.F=ko.Re("0")),this._e=ko.Re(e._e),this.H=ko.Re(e.H),this.re=ko.Re(e.re),this.V=ko.Re(e.V),this.de=ko.Re(e.de),this.xo=ko.Re(e.xo),this.ce=ko.Re(e.ce),this.X=ko.Re(e.X),this.le=ko.Re(e.le),this.Di=ko.Re(e.Di),this.J=ko.Re(e.J),this.No=ko.Re(e.No),this.wi=ko.Re(e.wi),this.ue=ko.Re(e.ue),this.pe=ko.Re(e.pe),this.ge=ko.Re(e.ge),this.fe=ko.Re(e.fe),this.he=ko.Re(""),this.Te=ko.Re(""),""!=e.p&&("4"==e.ge?"1"==e.fe?(this.he=ko.Re("assets/images/loc/lab.png"),this.Te=ko.Re(e.pe)):"2"==e.fe?(this.he=ko.Re("assets/images/loc/rad.png"),this.Te=ko.Re(e.pe)):(this.he=ko.Re("assets/images/beacon_light.gif"),this.Te=ko.Re("Emergency")):(this.he=ko.Re("assets/images/beacon_light.gif"),this.Te=ko.Re("Emergency"))),this.ke=ko.Re(e.ke),this.me=ko.Re(e.me),this.icon=ko.Re("/images/"+e.icon),this.color=ko.Re(e.color),this.location=ko.Re(e.location),this.x=null==e.location?ko.Re():ko.Re(parseInt(e.location.split(",")[0])+5+"px"),this.y=null==e.location?ko.Re():ko.Re(parseInt(e.location.split(",")[1])+145+"px"),this.rotation=null==e.rotation?ko.Re(0):ko.Re(e.rotation),this.$e=ko.Oe([]),this.bo=function(e,t){selectedNotOnBed=null,selectedBed=e,dxMnuTrtOnBed_Showing(e),$(".dx-menu-item-text").filter(":containsIN('Discharge Order')").parent().parent().L("data-toggle","modal"),$(".dx-menu-item-text").filter(":containsIN('Discharge Order')").parent().parent().L("data-target","#diagStatus"),$("#erroomsAndBeds .dx-menu-item-text").filter(":containsIN('Reassign')").parent().parent().L("data-toggle","modal"),$("#erroomsAndBeds .dx-menu-item-text").filter(":containsIN('Reassign')").parent().parent().L("data-target","#diagDoctors")},this.So=function(e,t){selectedBed=null,selectedNotOnBed=e,dxMnuTrtNotOnBed_Showing(e),$(".dx-menu-item-text").filter(":containsIN('Discharge Order')").parent().parent().L("data-toggle","modal"),$(".dx-menu-item-text").filter(":containsIN('Discharge Order')").parent().parent().L("data-target","#diagStatus"),$("#erNotOnBeds .dx-menu-item-text").filter(":containsIN('Move to')").parent().parent().L("data-toggle","modal"),$("#erNotOnBeds .dx-menu-item-text").filter(":containsIN('Move to')").parent().parent().L("data-target","#diagDoctors"),$("#erNotOnBeds .dx-menu-item-text").filter(":containsIN('Reassign')").parent().parent().L("data-toggle","modal"),$("#erNotOnBeds .dx-menu-item-text").filter(":containsIN('Reassign')").parent().parent().L("data-target","#diagDoctors")},this.Po=function(e,t){$("tr[id^='wp']").nn("selected_row_em"),$("tr[id^='bedId']").nn("selected_row_em"),$("tr[id^='pId']").nn("selected_row_em"),"none"==$(".Patient-Banner").Ie("display")?null!=e.p()&&0!=e.p()&&($(".Patient-Banner").Mi(),$("#bedId"+e.v()).tn("selected_row_em")):null!=e.p()&&0!=e.p()?null!=clickedBed&&clickedBed.p()==e.p()?$(".Patient-Banner").Mi():$("#bedId"+e.v()).tn("selected_row_em"):$(".Patient-Banner").Mi();try{var n=new XDate(e.te()),i=e.te().split(" ")[0].split("/");n=new XDate(i[2],i[1]-1,i[0])}catch(e){}$("#pbBDate").text(n.toString("yyyy MMM dd")+"("+e.ne()+"y)"),1==e.Y()?$("#pbGender").text("Male"):2==e.Y()&&$("#pbGender").text("Female"),$("#pbName").text(e.j()),$("#pbMRN").text(e.p()),clickedBed=e,lastBedClick="OnBed"},this.Ao=function(e,t){$("tr[id^='wp']").nn("selected_row_em"),$("tr[id^='bedId']").nn("selected_row_em"),$("tr[id^='pId']").nn("selected_row_em"),"none"==$(".Patient-Banner").Ie("display")?($(".Patient-Banner").Mi(),$("#pId"+e.p()).tn("selected_row_em")):null!=clickedNotOnBed&&clickedNotOnBed.p()==e.p()?$(".Patient-Banner").Mi():$("#pId"+e.p()).tn("selected_row_em");try{var n=new XDate(e.te()),i=e.te().split(" ")[0].split("/");n=new XDate(i[2],i[1]-1,i[0]),$("#pbBDate").text(n.toString("yyyy MMM dd")+"("+e.ne()+"y)")}catch(e){}$("#pbName").text(e.j()),1==e.Y()?$("#pbGender").text("Male"):2==e.Y()&&$("#pbGender").text("Female"),$("#pbMRN").text(e.p()),clickedNotOnBed=e,lastBedClick="NotOnBed"}},BedAlerts=function(e){this.v=ko.Re(e.v),this.p=ko.Re(e.p),this.On=ko.Re(e.On),this.Cn=ko.Re(e.Cn),this.status=ko.Re(e.status),this.Ri=ko.Re(e.Ri),this.wn=ko.Re(e.wn),this.icon=ko.Re("/images/"+e.icon),this.color=ko.Re(e.color)};function rdoNormal_Changed(){vm.nt("erDetailed"),$("#erMoitorAll").animate({opacity:0,marginLeft:"-40"},500,function(){$("#erMoitorAll").Ie("display","none"),$("#erDetailed").Ie("display","block"),$("#erDetailed").animate({opacity:1,marginLeft:"0px",marginRight:"0px"},500)}),$("#patientsFilters").hide()}function rdoAll_Changed(){vm.nt("erMonitorAll"),$("#erDetailed").animate({opacity:0,marginLeft:"-40"},500,function(){$("#erDetailed").Ie("display","none"),$("#erMoitorAll").Ie("display","flex"),$("#erMoitorAll").animate({opacity:1,marginLeft:"0px",marginRight:"0px"},500)}),$(".accAllContent").xn("slow"),$("#patientsFilters").show()}function rdoAllCurrent_Changed(){}function rdoToTriage_Changed(){}function rdoTriaged_Changed(){}function rdoTreatment_Changed(){}function rdoAdmitted_Changed(){}function rdoDischarged_Changed(){}function rdoTrSmall_Changed(){SmallWpSmallTrSmallSm()}function rdoTrMed_Changed(){NoWpMedTrSmallSm()}function rdoTrLarge_Changed(){NoWpLargeTrNoSm()}function rdoWpSmall_Changed(){SmallWpSmallTrSmallSm()}function rdoWpMed_Changed(){MedWpNoTrMedSm()}function rdoWpLarge_Changed(){MedWpNoTrNoSm()}function SmallWpSmallTrSmallSm(){$(".panel1").Ie("width","37%"),$(".panel1").Ie("backgroundImage","none"),$(".panel1").children().show(),$("#wpLbl").hide(),$(".panel2").Ie("width","40%"),$(".panel2").children().show(),$("#TrLbl").hide(),$(".panel3").Ie("width","22%"),$(".panel3").children().show(),$("#SmLbl").hide(),vm.et("erInTrSmall"),vm.tt("nsERWPSmall")}function NoWpMedTrSmallSm(){$(".panel1").Ie("width","3%"),$(".panel1").Ie({backgroundImage:"-webkit-linear-gradient(left, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.0) 51%, rgba(255, 255, 255, 0.2) 100%)",position:"relative"}),$(".panel1").children().hide(),$("#wpLbl").show(),$("#wpLbl").Ie({whiteSpace:"nowrap",position:"absolute",top:"50%",transform:"rotate(-90deg)",left:"0","background-image":"none",border:"none"}),$(".panel2").Ie("width","74%"),$(".panel2").children().show(),$("#TrLbl").hide(),$(".panel3").Ie("width","22%"),$(".panel3").children().show(),$("#SmLbl").hide(),vm.et("erInTrMed")}function NoWpLargeTrNoSm(){$(".panel1").Ie("width","3%"),$(".panel1").children().hide(),$("#wpLbl").show(),$(".panel2").Ie("width","93%"),$(".panel2").children().show(),$("#TrLbl").hide(),$(".panel3").Ie("width","3%"),$(".panel3").children().hide(),$("#SmLbl").show()}function MedWpNoTrMedSm(){$(".panel1").Ie("width","74%"),$(".panel1").children().show(),$("#wpLbl").hide(),$(".panel2").Ie("width","3%"),$(".panel2").children().hide(),$("#TrLbl").show(),$(".panel3").Ie("width","22%"),$(".panel3").children().show(),$("#SmLbl").hide(),vm.tt("nsERWPMed")}function MedWpNoTrNoSm(){$(".panel1").Ie("width","93%"),$(".panel1").children().show(),$("#wpLbl").hide(),$(".panel2").Ie("width","3%"),$(".panel2").children().hide(),$("#TrLbl").show(),$(".panel3").Ie("width","3%"),$(".panel3").children().hide(),$("#SmLbl").show()}function ModalSheetClose(){$("#framTriageSheet").L("src",""),AfterSheetClose()}function ModalRequestAdmissionClose(){$("#framRequestAdmission").L("src",""),AfterAdmissionClose()}function AfterCancelRegistration(e){ko.$.T(vm._(),function(t){ko.$.T(t.O(),function(n){void 0!=n&&n.p()==e&&t.O.remove(n)})}),$("#diagCancelReg").K("hide")}$(document).Mo(function(){(vm=new NursestationViewModel).Wo=function(e){return this.tt()}.bind(vm),vm.Ro=function(e){return this.et()}.bind(vm),vm.Co=function(e){return this.nt()}.bind(vm),ko.Oo(vm),$("#erToolBar").Ie("display","inline"),$("#collAll").Ie("display","inline"),$("#erView").Ie("display","block"),setTimeout(function(){$("#erNsList .panelfullwidthS:first-child tr[id*='try_col'] td").wo("click",function(){$("html,body").animate({scrollTop:$(this).offset().top-43},800)}),$("#erNsList .panelfullwidthS:not(:first-child) tr[id*='try_col'] td").slice(1).wo("click",function(){$("html,body").animate({scrollTop:$(this).offset().top+0},800)}),$("#slide_patient_data_details").click(function(){$(this).Eo("slide_patient_data_details_up slide_patient_data_details_down"),$(".patient_data_details_slide").Mi()})},1e3),$("#diagTriageSheet").wo("hidden.bs.modal",function(){ModalSheetClose()}),$("#diagAdmissionRequest").wo("hidden.bs.modal",function(){ModalRequestAdmissionClose()}),$("#txtGeneralSearch").An(function(){var e=!1,t=null,n=null,i=null,o=null,s=$("#txtGeneralSearch").Mn();""!=s&&(ko.$.T(vm._(),function(a){ko.$.T(a.O(),function(n){void 0!=n&&(n.p().toString().toLowerCase()!=s.toLowerCase()&&n.j().toString().toLowerCase().trim()!=s.toLowerCase().trim()||($("#lblSearchResult").Do("Patient in: "+a.U()+" ( Patient's Waiting List )"),e=!0,t=a,o=n))}),0==e&&ko.$.T(a.B(),function(o){ko.$.T(o.I(),function(i){void 0!=i&&(i.p().toString().toLowerCase()!=s.toLowerCase()&&i.j().toString().toLowerCase().trim()!=s.toLowerCase().trim()||($("#lblSearchResult").Do("Patient in: "+a.U()+" ( In Treatment )."),e=!0,t=a,n=i))}),ko.$.T(o.Ae(),function(n){void 0!=n&&(n.p().toString().toLowerCase()!=s.toLowerCase()&&n.j().toString().toLowerCase().trim()!=s.toLowerCase().trim()||($("#lblSearchResult").Do("Patient in: "+a.U()+" ( In Treatment )."),e=!0,t=a,i=n))})})}),0==e?$("#lblSearchResult").Do(""):(void 0!=openedNS&&t.v()==openedNS||t.vn(t,null),null!=o&&(console.log(o.p()+"       "+lastBedClick+"       "+o.p()+"        "+(void 0==clickedWP?"undefined":clickedWP.p())),void 0!=clickedWP&&"WP"==lastBedClick&&clickedWP.p()==o.p()||o.To(o,null)),null!=n&&(console.log(n.p()+"       "+lastBedClick+"       "+n.p()+"        "+(void 0==clickedBed?"undefined":clickedBed.p())),void 0!=clickedBed&&"OnBed"==lastBedClick&&clickedBed.p()==n.p()||n.Po(n,null)),null!=i&&(console.log(i.p()+"       "+lastBedClick+"       "+i.p()+"        "+(void 0==clickedNotOnBed?"undefined":clickedNotOnBed.p())),void 0!=clickedNotOnBed&&"NotOnBed"==lastBedClick&&clickedNotOnBed.p()==i.p()||i.Ao(i,null))))})}),ko.Go.sort={init:function(e,t){var n=!1;ko.$.Fo(e,"click",function(i){e.style.cursor="pointer";var o=ko.$.Lo(t()),s=i.target.getAttribute("data-sort-by"),a=o.list,r=o.Ko;n=!n,a().sort(function(e,t){var i=e[s],o=t[s];"string"==typeof i&&"string"==typeof o&&(i=i.toLowerCase(),o=o.toLowerCase());var a=0;return i<o?a=-1:i>o&&(a=1),a=n?a:-1*a,r&&(a=a||e[r]-t[r]),a})})}};